<style>
.my-text {
background-color: #f5f5f5;
padding: 10px;
margin-left: 30%;
}
</style>

<div class="my-text">
以下のようなテーブルがあります。
```
CREATE TABLE `rent_book` (
  `rent_id` int(11) NOT NULL,
  `book_id` char(5) NOT NULL,
  `is_return` tinyint(1) NOT NULL DEFAULT 0,
  `returned_day` date DEFAULT NULL,
  PRIMARY KEY (`rent_id`,`book_id`),
  KEY `book_id` (`book_id`),
  CONSTRAINT `rent_book_ibfk_1` 
  FOREIGN KEY (`rent_id`) REFERENCES `rentals` (`id`),
  CONSTRAINT `rent_book_ibfk_2` 
  FOREIGN KEY (`book_id`) REFERENCES `books` (`id`)
);
```
次のようにデータを挿入しました。
```
MariaDB [book_rental]> select * from rent_book;
+---------+---------+-----------+--------------+
| rent_id | book_id | is_return | returned_day |
+---------+---------+-----------+--------------+
|       1 | bk001   |         0 | NULL         |
|       1 | bk002   |         0 | NULL         |
|       2 | bk003   |         0 | NULL         |
|       3 | bk004   |         0 | NULL         |
|       3 | bk005   |         0 | NULL         |
|       4 | bk001   |         0 | NULL         |
+---------+---------+-----------+--------------+
```
この場合、ある特定のレコードを検索するには、次のようなSQLでいいのでしょうか?
```
MariaDB [book_rental]> select * from rent_book 
    -> where rent_id = 2 and book_id = 'bk003';
```
このSQLでは次のように検索結果が表示されます。
```
+---------+---------+-----------+--------------+
| rent_id | book_id | is_return | returned_day |
+---------+---------+-----------+--------------+
|       2 | bk003   |         0 | NULL         |
+---------+---------+-----------+--------------+
```
</div>


---

はい、そのSQLで正しいです 👍

`rent_book` テーブルは **主キーが `(rent_id, book_id)` の複合キー**になっています。
したがって、特定のレコードを一意に指定するには `rent_id` と `book_id` の両方を指定する必要があります。

あなたが書かれたクエリ:

```sql
select * from rent_book 
where rent_id = 2 and book_id = 'bk003';
```

はまさに **主キーでレコードを検索する書き方**で、期待どおり単一行が返ってきています。

---

ちなみに、状況に応じて以下のような書き方もできます：

* **rent_id だけで検索**（その貸出全体の本を一覧する場合）

```sql
select * from rent_book where rent_id = 2;
```

* **book_id だけで検索**（特定の本がどの貸出で借りられているかを調べる場合）

```sql
select * from rent_book where book_id = 'bk001';
```

* **主キーで検索（今回と同じ）**

```sql
select * from rent_book where rent_id = 2 and book_id = 'bk003';
```

---

👉 結論：
「特定の1行を取得したい」なら、今の書き方でバッチリです。

ご希望としては「主キーを指定して一意のレコードを検索したい」という確認でよろしいですか？




;; 修正時刻: Wed 2025/10/01 06:55:55
